{"version":3,"file":"electron-fullscreen-toggle.es.js","sources":["../../../source/Utils/Log.js","../../../source/Plugin/ElectronFullscreenToggle/ElectronFullscreenToggle.js"],"sourcesContent":["import videojs from 'video.js';\n\nlet logType = '';\n\ntry {\n  logType = localStorage && localStorage.getItem('vjs-plus-log');\n} catch (e) {}\n\nconst log = (function () {\n  if (logType === 'normal' || videojs.browser.IE_VERSION) {\n    // log without style\n    return console.info.bind(console, '[VJS Plus]:');\n  } else if (logType) {\n    // log with style\n    return console.info.bind(\n      console,\n      '%c[VJS Plus]:',\n      'font-weight: bold; color:#2196F3;'\n    );\n  }\n\n  return function () {};\n})();\n\nexport default log;\n","import videojs from 'video.js';\nimport log from '../../Utils/Log';\n\nlet getCurrentWindow;\ntry {\n  getCurrentWindow = require('electron').remote.getCurrentWindow();\n} catch (error) {\n  getCurrentWindow = window.getCurrentWindow;\n}\n\nclass ElectronFullscreenToggle extends videojs.getComponent(\n  'FullscreenToggle'\n) {\n  constructor(player, options) {\n    super(player, options);\n\n    const currentWindow = window.getCurrentWindow();\n    const setFullscreen = flag => {\n      currentWindow.setFullScreen(flag);\n      return player;\n    };\n\n    const triggerFullscreenChange = () => {\n      player.trigger('fullscreenchange');\n    };\n\n    player.requestFullscreen = setFullscreen.bind(player, true);\n    player.exitFullscreen = setFullscreen.bind(player, false);\n    player.isFullscreen = () => currentWindow.isFullScreen();\n\n    currentWindow.addListener('enter-full-screen', triggerFullscreenChange);\n    currentWindow.addListener('leave-full-screen', triggerFullscreenChange);\n\n    player.on('dispose', () => {\n      currentWindow.removeListener(\n        'enter-full-screen',\n        triggerFullscreenChange\n      );\n      currentWindow.removeListener(\n        'leave-full-screen',\n        triggerFullscreenChange\n      );\n    });\n\n    if (player.isFullscreen()) {\n      // @ts-ignore\n      this.handleFullscreenChange();\n      player.addClass('vjs-fullscreen');\n    }\n  }\n\n  handleClick() {\n    if (this.player_.isFullscreen()) {\n      this.player_.exitFullscreen();\n    } else {\n      this.player_.requestFullscreen();\n    }\n  }\n}\n\nif (getCurrentWindow) {\n  videojs.registerComponent(\n    'ElectronFullscreenToggle',\n    ElectronFullscreenToggle\n  );\n\n  const controlBarChildren = videojs.getComponent('ControlBar').prototype\n    .options_.children;\n\n  const fullScreenButtonIndex = controlBarChildren.indexOf('fullscreenToggle');\n\n  controlBarChildren[fullScreenButtonIndex] = 'ElectronFullscreenToggle';\n} else {\n  log(\n    'Plugin \"ElectronFullscreenToggle\" is not enabled, please check the docs for more information'\n  );\n}\n"],"names":["logType","localStorage","getItem","e","log","videojs","browser","IE_VERSION","console","info","bind","getCurrentWindow","require","remote","error","window","ElectronFullscreenToggle","player","options","currentWindow","setFullscreen","flag","setFullScreen","triggerFullscreenChange","trigger","requestFullscreen","exitFullscreen","isFullscreen","isFullScreen","addListener","on","removeListener","handleFullscreenChange","addClass","handleClick","player_","getComponent","registerComponent","controlBarChildren","prototype","options_","children","fullScreenButtonIndex","indexOf"],"mappings":"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"}