{"version":3,"file":"picture-in-picture.es.js","sources":["../../../source/Plugin/PictureInPicture/ExitPipButton.js","../../../source/Plugin/PictureInPicture/PipPlayerWrapper.js","../../../source/Plugin/PictureInPicture/PipButton.js","../../../source/Plugin/PictureInPicture/PictureInPicture.js"],"sourcesContent":["import videojs from 'video.js';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass ExitPipButton extends ClickableComponent {\n  constructor(player, options) {\n    super(player, {\n      name: 'ExitPipButton',\n      ...options\n    });\n\n    this.addClass('vjs-exit-pip-button');\n\n    this.el_.querySelector('.vjs-icon-placeholder').innerHTML = '&#10005;';\n  }\n\n  handleClick() {\n    this.options_.parentPlayer.pictureInPicture().exit();\n  }\n}\n\nExitPipButton.prototype.controlText_ = 'Exit Pictutre In Pictutre';\n\nvideojs.registerComponent('ExitPipButton', ExitPipButton);\n\nexport default ExitPipButton;\n","import videojs from 'video.js';\nimport ExitPipButton from './ExitPipButton';\n\nconst Component = videojs.getComponent('Component');\n\nclass PipPlayerWrapper extends Component {\n  constructor(player, options) {\n    super(player, options);\n\n    player.addChild(\n      new ExitPipButton(player, {\n        parentPlayer: options.parentPlayer\n      })\n    );\n\n    this.addChild(player);\n\n    if (!options.wrapper) {\n      this.addClass('vjs-pip-player-wrapper');\n      document.body.appendChild(this.el_);\n    }\n  }\n\n  createEl() {\n    if (this.options_.wrapper) {\n      return this.options_.wrapper;\n    }\n\n    return super.createEl();\n  }\n}\n\nvideojs.registerComponent('PipPlayerWrapper', PipPlayerWrapper);\n\nexport default PipPlayerWrapper;\n","import videojs from 'video.js';\n\nconst Button = videojs.getComponent('Button');\n\nclass PipButton extends Button {\n  constructor(player, options) {\n    super(player, options);\n\n    this.el_.querySelector('.vjs-icon-placeholder').className +=\n      ' vjs-icon-picture-in-picture';\n  }\n\n  buildCSSClass() {\n    return `vjs-pip-button ${super.buildCSSClass()}`;\n  }\n\n  handleClick(...args) {\n    super.handleClick(...args);\n\n    this.player_.pictureInPicture().toggle();\n  }\n}\n\nPipButton.prototype.controlText_ = 'Picture in Picture';\n\nvideojs.registerComponent('PipButton', PipButton);\n\nvideojs.hook('setup', vjsPlayer => {\n  const { parent, index } = vjsPlayer.findChild('SettingMenuButton')[0];\n\n  parent.addChild(new PipButton(vjsPlayer), {}, index);\n});\n","import videojs from 'video.js';\n\nimport PipPlayerWrapper from './PipPlayerWrapper';\nimport './PictureInPicture.scss';\nimport './PipButton';\n\nclass pictureInPicture extends videojs.getPlugin('plugin') {\n  constructor(player, options = {}) {\n    super(player, options);\n\n    this.cache_ = {};\n    this.pipPlayer = null;\n    this.options_ = options;\n    this.parentPlayer = player;\n  }\n\n  toggle() {\n    if (this.pipPlayer) {\n      this.exit();\n    } else {\n      this.init();\n    }\n  }\n\n  init() {\n    if (!this.pipPlayer) {\n      this.handleOriginPlayer();\n      this.createPipPlayer();\n    }\n  }\n\n  createPipPlayer() {\n    const { parentPlayer, options_ } = this;\n    const id = parentPlayer.id_ + '-pip-player';\n    const videoEl = videojs.dom.createEl('video', {\n      id,\n      className: 'vjs-pip-player'\n    });\n\n    document.body.appendChild(videoEl);\n\n    const pipPlayerOptions = {\n      ...parentPlayer.options_,\n      ...parentPlayer.cache_,\n      autoplay: true,\n      muted: parentPlayer.muted()\n    };\n\n    const pipPlayer = (this.pipPlayer = videojs(videoEl, pipPlayerOptions));\n\n    this.wrapper = new PipPlayerWrapper(pipPlayer, {\n      ...options_,\n      parentPlayer\n    });\n\n    this.dragzone = pipPlayer.getChild('PlayToggleLayer');\n\n    this.updatePosition({\n      ...this.cache_,\n      ...options_\n    });\n\n    pipPlayer.ready(() => {\n      pipPlayer.currentTime(parentPlayer.currentTime());\n      pipPlayer.play();\n    });\n\n    if (options_.draggable !== false) {\n      this.draggable(this.dragzone.el_);\n    }\n  }\n\n  handleOriginPlayer() {\n    const { parentPlayer } = this;\n\n    parentPlayer.pause();\n    parentPlayer.hasStarted(false);\n    parentPlayer.controls(false);\n    parentPlayer.addClass('vjs-pip-player-enabled');\n\n    parentPlayer.one('play', () => {\n      this.exit();\n    });\n  }\n\n  exit() {\n    const { parentPlayer, pipPlayer, wrapper } = this;\n\n    if (parentPlayer) {\n      parentPlayer.controls(true);\n      parentPlayer.removeClass('vjs-pip-player-enabled');\n      parentPlayer.paused() && parentPlayer.play();\n\n      if (pipPlayer) {\n        if (!pipPlayer.ended()) {\n          parentPlayer.currentTime(pipPlayer.currentTime());\n        }\n      }\n    }\n\n    if (pipPlayer) {\n      pipPlayer.dispose();\n      wrapper.dispose();\n    }\n\n    this.pipPlayer = null;\n  }\n\n  dispose() {\n    this.parentPlayer = null;\n  }\n\n  updatePosition({ x, y }) {\n    if (typeof x !== 'undefined' && typeof y !== 'undefined') {\n      this.wrapper.el_.style.bottom = y + 'px';\n      this.wrapper.el_.style.left = x + 'px';\n    }\n  }\n\n  draggable(el) {\n    let x, y;\n    const _this = this;\n\n    const move = evt => {\n      evt.preventDefault();\n\n      this.cache_.x = Math.max(\n        0,\n        Math.min(window.innerWidth - el.offsetWidth, evt.clientX - x)\n      );\n      this.cache_.y = Math.max(\n        0,\n        Math.min(\n          window.innerHeight - el.offsetHeight,\n          window.innerHeight - evt.clientY - el.offsetHeight + y\n        )\n      );\n\n      this.updatePosition(this.cache_);\n    };\n\n    el.addEventListener('mousedown', evt => {\n      evt.preventDefault();\n\n      x = evt.offsetX;\n      y = evt.offsetY;\n\n      const disableClick = () => {\n        window.removeEventListener('mousemove', disableClick);\n        _this.dragzone.disable();\n      };\n\n      window.addEventListener('mousemove', move);\n      window.addEventListener('mousemove', disableClick);\n\n      window.addEventListener('mouseup', function mouseup(evt) {\n        window.removeEventListener('mouseup', mouseup);\n        window.removeEventListener('mousemove', move);\n        window.removeEventListener('mousemove', disableClick);\n\n        setTimeout(() => {\n          _this.dragzone.enable();\n        }, 0);\n      });\n    });\n\n    const onResize = () => {\n      const { x, y } = this.cache_;\n\n      this.updatePosition({\n        x: Math.min(x, window.innerWidth - el.offsetWidth),\n        y: Math.min(y, window.innerHeight - el.offsetHeight)\n      });\n    };\n\n    window.addEventListener('resize', onResize);\n\n    this.pipPlayer.on('dispose', () => {\n      window.removeEventListener('resize', onResize);\n    });\n  }\n}\n\nvideojs.registerPlugin('pictureInPicture', pictureInPicture);\n"],"names":["ClickableComponent","videojs","getComponent","ExitPipButton","player","options","name","addClass","el_","querySelector","innerHTML","handleClick","options_","parentPlayer","pictureInPicture","exit","prototype","controlText_","registerComponent","Component","PipPlayerWrapper","addChild","wrapper","document","body","appendChild","createEl","Button","PipButton","className","buildCSSClass","args","player_","toggle","hook","vjsPlayer","findChild","parent","index","cache_","pipPlayer","init","handleOriginPlayer","createPipPlayer","id","id_","videoEl","dom","pipPlayerOptions","autoplay","muted","dragzone","getChild","updatePosition","ready","currentTime","play","draggable","pause","hasStarted","controls","one","removeClass","paused","ended","dispose","x","y","style","bottom","left","el","_this","move","evt","preventDefault","Math","max","min","window","innerWidth","offsetWidth","clientX","innerHeight","offsetHeight","clientY","addEventListener","offsetX","offsetY","disableClick","removeEventListener","disable","mouseup","setTimeout","enable","onResize","on","getPlugin","registerPlugin"],"mappings":"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"}