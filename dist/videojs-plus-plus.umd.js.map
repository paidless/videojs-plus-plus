{"version":3,"file":"videojs-plus-plus.umd.js","sources":["../source/Utils/FindChild.js","../source/Utils/GetDuration.js","../source/Player/Player.js","../source/Components/ControlBar/ControlBar.Mobile.js","../source/Components/ControlBar/Progress/TimeTooltip.js","../source/Components/ControlBar/Progress/ProgressBarPadding.js","../source/Components/ControlBar/Progress/Progress.js","../source/Components/ControlBar/ControlBar.js","../source/Components/Title/Title.js","../source/Components/PlayToggleLayer/PlayToggleLayer.js","../source/Components/ContextMenu/Item/ContextMenuItem.js","../source/Components/ContextMenu/Item/ContextMenuToggleLoop.js","../source/Components/ContextMenu/Item/AboutThisPlayer.js","../source/Components/ContextMenu/CloseContextMenu.js","../source/Components/ContextMenu/ContextMenu.js","../source/Components/SettingMenu/CloseSettingMenu.js","../source/Components/SettingMenu/SettingMenu.js","../source/Components/SettingMenu/Item/SettingMenuItem.js","../source/Components/SettingMenu/Item/SettingOnOffItem.js","../source/Components/SettingMenu/Item/SettingSubOptionTitle.js","../source/Components/SettingMenu/Item/SettingSubOptionItem.js","../source/Components/SettingMenu/Item/SettingOptionItem.js","../source/Utils/Log.js","../source/Components/SettingMenu/PlaybackRate/PlaybackRateSettingItem.js","../source/Components/SettingMenu/SettingMenuButton.js"],"sourcesContent":["import videojs from 'video.js';\n\nfunction findChild(parent, name, result) {\n  const children = [];\n\n  if (parent && parent.childIndex_ && Object.keys(parent.childIndex_).length) {\n    for (let componentId in parent.childIndex_) {\n      const component = parent.childIndex_[componentId];\n\n      if (component && component.name_ == name) {\n        result.push({\n          parent,\n          component,\n          index: parent.children_.indexOf(component),\n          [name]: component\n        });\n      }\n\n      children.push(findChild(component, name, result));\n    }\n  }\n\n  return {\n    name,\n    parent,\n    children\n  };\n}\n\nvideojs.getComponent('Component').prototype.findChild = function (name) {\n  const result = [];\n\n  findChild(this, name, result);\n\n  return result;\n};\n","import videojs from 'video.js';\n\nclass getDuration extends videojs.getPlugin('plugin') {\n  constructor(player, options) {\n    super(player, options);\n  }\n\n  value() {\n    const duration = this.player.duration();\n    \n    return duration === Infinity ? this.player.liveTracker.liveCurrentTime() : duration;\n  }\n}\n\nvideojs.registerPlugin('getDuration', getDuration);\n","import videojs from 'video.js';\nimport './Player.scss';\n\nconst { IS_IPHONE, IOS_VERSION } = videojs.browser;\n\nvideojs.hook('setup', vjsPlayer => {\n  vjsPlayer.playsinline(vjsPlayer.options_.playsinline !== false);\n\n  vjsPlayer.addClass('video-js');\n\n  if (IS_IPHONE) {\n    vjsPlayer.addClass('vjs-is-iphone');\n    if (IOS_VERSION < 11) {\n      vjsPlayer.addClass('vjs-iphone-below-11');\n    }\n  }\n});\n","import videojs from 'video.js';\n\nimport './ControlBar.Mobile.scss';\n\nconst Component = videojs.getComponent('Component');\nconst ControlBar = videojs.getComponent('ControlBar');\n\nclass ControlSeparator extends Component {\n  constructor(player, options) {\n    super(player, options);\n    this.addClass('vjs-control-separator');\n    this.addClass(options.className || '');\n  }\n}\n\nvideojs.registerComponent('ControlSeparator', ControlSeparator);\n\nvideojs.hook('beforesetup', (_, options) => {\n  const children = ControlBar.prototype.options_.children.slice(0);\n  const index = children.indexOf('CustomControlSpacer');\n\n  if (index > -1) {\n    ControlBar.prototype.options_.children = [\n      {\n        name: 'ControlSeparator',\n        className: 'top',\n        children: []\n      },\n      {\n        name: 'ControlSeparator',\n        className: 'middle',\n        children: children.splice(0, index + 1)\n      },\n      {\n        name: 'ControlSeparator',\n        className: 'bottom',\n        children: children\n      }\n    ];\n  }\n\n  return options;\n});\n\n// prevent control bar immediately shown\nvideojs.hook('setup', vjsPlayer => {\n  const enableMobileView = vjsPlayer.options_.mobileView !== false;\n\n  const matchDimension = value => {\n    return window.matchMedia\n      ? window.matchMedia(`(max-width: ${value}px)`).matches\n      : window.innerWidth <= value;\n  };\n\n  if (matchDimension(480) && enableMobileView) {\n    // Prevent control bar shown immediately after playing\n    vjsPlayer.controlBar.hide();\n    vjsPlayer.one('playing', () => {\n      // Show control bar after `userinactive` (depends on `inactivityTimeout`) or user action\n      const events = ['mouseover', 'userinactive', 'touchstart'];\n\n      vjsPlayer.one(events, function callback() {\n        vjsPlayer.off(events, callback);\n        vjsPlayer.controlBar.show();\n      });\n\n      // If player do not autoplay start,\n      // the first click to play action cause player inactive ( maybe a bug of videojs )\n      // Then clcik on the player before `inactivityTimeout`, the control bar will no shown as the player still inactive\n      // So we need to make sure player is active after second click\n      vjsPlayer.one('touchend', () => {\n        vjsPlayer.userActive(true);\n      });\n    });\n\n    vjsPlayer.addClass('vjs-mobile-view');\n  }\n});\n","import videojs from 'video.js';\n\nconst Dom = videojs.dom;\nconst TimeTooltip = videojs.getComponent('TimeTooltip');\n\n// https://github.com/Ami-OS/video.js/blob/65750e311661e70f170e3652573caacf6f21fcce/src/js/control-bar/progress-control/time-tooltip.js#L54-L133\nTimeTooltip.prototype.update = function update(seekBarRect, seekBarPoint, content) {\n  const tooltipRect = Dom.getBoundingClientRect(this.el_);\n  const playerRect = Dom.getBoundingClientRect(this.player_.el());\n  const seekBarPointPx = seekBarRect.width * seekBarPoint;\n\n  // do nothing if either rect isn't available\n  // for example, if the player isn't in the DOM for testing\n  if (!playerRect || !tooltipRect) {\n    return;\n  }\n\n  // This is the space right of the `seekBarPoint` in the `SeekBar`\n  let spaceRightOfPoint = seekBarRect.width - seekBarPointPx;\n\n  // This is the space left of the `seekBarPoint` in the `SeekBar`\n  let spaceLeftOfPoint = seekBarRect.width - spaceRightOfPoint;\n\n  // This is the number of pixels by which the tooltip will need to be pulled\n  // further to the right to center it over the `seekBarPoint`.\n  let pullTooltipBy = tooltipRect.width / 2;\n\n  // The center of `seekBar`\n  const centerPosition = seekBarRect.width / 2;\n\n  // Offset value of the `centerPosition`\n  const centerOffsetOfPoint = centerPosition - seekBarPointPx;\n\n  // If `tooltipRect` is greater than `seekBarRect` then center the tooltip,\n  // else patch the offset value of the tooltip overflow space.\n  if (tooltipRect.width > seekBarRect.width) {\n    pullTooltipBy += centerOffsetOfPoint;\n  } else if (spaceLeftOfPoint < pullTooltipBy) {\n    pullTooltipBy += pullTooltipBy - spaceLeftOfPoint;\n  } else if (spaceRightOfPoint < pullTooltipBy) {\n    pullTooltipBy -= pullTooltipBy - spaceRightOfPoint;\n  }\n\n  // prevent small width fluctuations within 0.4px from\n  // changing the value below.\n  // This really helps for live to prevent the play\n  // progress time tooltip from jittering\n  pullTooltipBy = Math.round(pullTooltipBy);\n\n  this.el_.style.right = `-${pullTooltipBy}px`;\n  this.write(content);\n};","import videojs from 'video.js';\n\nimport './ProgressBarPadding.scss';\n\nconst Component = videojs.getComponent('Component');\n\nclass ProgressBarPadding extends Component {\n\n  // The constructor of a component receives two arguments: the\n  // player it will be associated with and an object of options.\n  constructor(player, options = {}) {\n\n    // It is important to invoke the superclass before anything else,\n    // to get all the features of components out of the box!\n    super(player, options);\n  }\n\n  // The `createEl` function of a component creates its DOM element.\n  createEl() {\n    return videojs.dom.createEl('div', {\n\n      // Prefixing classes of elements within a player with \"vjs-\"\n      // is a convention used in Video.js.\n      className: 'vjs-progress-bar-padding'\n    });\n  }\n}\n\nvideojs.registerComponent('ProgressBarPadding', ProgressBarPadding);\n\nvideojs.getComponent('seekBar').prototype.options_.children.push('ProgressBarPadding');\n","import videojs from 'video.js';\n\nimport './TimeTooltip';\nimport './ProgressBarPadding';\n\nimport './Progress.scss';\n\nconst SeekBar = videojs.getComponent('SeekBar');\n\nSeekBar.prototype.getPercent = function getPercent() {\n  const time = this.player_.currentTime();\n  const percent = time / this.player_.getDuration().value();\n\n  return percent >= 1 ? 1 : percent;\n};\n\nSeekBar.prototype.handleMouseMove = function handleMouseMove(event) {\n  const player = this.player_;\n\n  // if (!videojs.dom.isSingleLeftClick(event) || isAdPlaying(player)) {\n  if (!videojs.dom.isSingleLeftClick(event)) {\n    return;\n  }\n\n  let newTime = this.calculateDistance(event) * player.getDuration().value();\n\n  if (newTime === player.getDuration().value()) {\n    newTime = newTime - 0.1;\n  }\n\n  player.currentTime(newTime);\n\n  this.update();\n};\n","import videojs from 'video.js';\nimport './ControlBar.Mobile';\n\nimport './Progress/Progress';\nimport './ControlBar.scss';\n\nvideojs.getComponent('ControlBar').prototype.options_.children = [\n  'PlayToggle',\n  'CustomControlSpacer',\n  'VolumePanel',\n  'CurrentTimeDisplay',\n  'TimeDivider',\n  'DurationDisplay',\n  'ProgressControl',\n  'CustomControlSpacer',\n  'SettingMenuButton',\n  'FullscreenToggle'\n];\n\nvideojs.hook('setup', vjsPlayer => {\n  vjsPlayer.on('mouseleave', function () {\n    vjsPlayer.userActive(false);\n  });\n\n  vjsPlayer.ready(function () {\n    vjsPlayer.controls(vjsPlayer.options_.controls !== false);\n  });\n});\n","import videojs from 'video.js';\n\nimport './Title.scss';\n\nclass Title extends videojs.getComponent('Component') {\n  constructor(player, options) {\n    super(player, options);\n\n    this.title_ = options.playerOptions.title || '';\n\n    this.update(this.title_);\n  }\n\n  createEl() {\n    const el = super.createEl('div', {\n      className: 'vjs-title'\n    });\n\n    this.contentEl_ = videojs.dom.createEl('div', {\n      className: 'vjs-title-field'\n    });\n\n    el.appendChild(this.contentEl_);\n\n    return el;\n  }\n\n  update(title_) {\n    if (!title_) {\n      this.hide();\n    } else {\n      this.show();\n    }\n\n    this.player_.cache_.title = this.title_;\n    this.title_ = title_;\n\n    this.contentEl_.innerHTML = title_;\n  }\n}\n\nconst title = function (title_) {\n  const videoTitle = this.player_.getChild('VideoTitle');\n\n  if (typeof title_ === 'undefined') {\n    return videoTitle.title_;\n  }\n\n  videoTitle.update(title_);\n};\n\nvideojs.registerPlugin('title', title);\nvideojs.registerComponent('VideoTitle', Title);\n\nvideojs\n  .getComponent('Player')\n  .prototype.options_.children.splice(2, 0, 'VideoTitle');\n","import videojs from 'video.js';\nimport './PlayToggleLayer.scss';\n\nconst PlayToggleButton = videojs.getComponent('PlayToggle');\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass PlayToggleLayer extends ClickableComponent {\n  createEl() {\n    return videojs.dom.createEl('div', {\n      className: 'vjs-play-toggle-layer'\n    });\n  }\n\n  handleClick(evt) {\n    if (this.player_.userActive() || this.player_.paused()) {\n      PlayToggleButton.prototype.handleClick.call(this, evt);\n    }\n  }\n}\n\nvideojs.registerComponent('PlayToggleLayer', PlayToggleLayer);\n\nconst playerChildren = videojs.getComponent('Player').prototype.options_\n  .children;\nconst loadSpinnerIndex = playerChildren.indexOf('loadingSpinner');\n\nplayerChildren.splice(loadSpinnerIndex, 0, 'PlayToggleLayer');\n","import videojs from 'video.js';\n\nconst MenuItem = videojs.getComponent('MenuItem');\n\nclass ContextMenuItem extends MenuItem {\n  constructor(player, options) {\n    super(player, {\n      ...options,\n      selectable: true\n    });\n\n    this.addClass('vjs-context-menu-item');\n\n    this.controlText(options.label);\n  }\n\n  createEl(...args) {\n    const el = super.createEl(...args);\n\n    el.insertAdjacentHTML(\n      'afterbegin',\n      `<span aria-hidden=\"true\" class=\"vjs-icon-placeholder ${\n        this.options_.icon || ''\n      }\"></span>`\n    );\n\n    return el;\n  }\n\n  handleClick() {\n    const { component: ContextMenu } = this.player_.findChild('ContextMenu')[0];\n\n    ContextMenu.hide();\n  }\n}\n\nvideojs.registerComponent('ContextMenuItem', ContextMenuItem);\n\nexport default ContextMenuItem;\n","import videojs from 'video.js';\nimport ContextMenuItem from './ContextMenuItem.js';\n\nclass ContextMenuToggleLoop extends ContextMenuItem {\n  constructor(player) {\n    super(player, {\n      name: 'ContextMenuToggleLoop',\n      label: 'Loop',\n      icon: 'vjs-icon-loop'\n    });\n\n    this.addClass('vjs-checkbox');\n\n    player.on('loadstart', this.update.bind(this));\n  }\n\n  update() {\n    this.selected(this.player_.loop());\n  }\n\n  handleClick() {\n    super.handleClick();\n\n    this.player_.loop(!this.player_.loop());\n\n    this.update();\n  }\n}\n\nvideojs.registerComponent('ContextMenuToggleLoop', ContextMenuToggleLoop);\n\nexport default ContextMenuToggleLoop;\n","import videojs from 'video.js';\nimport ContextMenuItem from './ContextMenuItem.js';\n\nclass AboutThisPlayer extends ContextMenuItem {\n  constructor(player) {\n    super(player, {\n      name: 'AboutThisPlayer',\n      label: 'About This Player',\n      icon: 'vjs-icon-github'\n    });\n  }\n\n  handleClick() {\n    super.handleClick();\n\n    window.open('https://github.com/paidless/videojs-plus-plus', '_blank');\n  }\n}\n\nvideojs.registerComponent('AboutThisPlayer', AboutThisPlayer);\n\nexport default AboutThisPlayer;\n","import videojs from 'video.js';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\n// for mobile view\nclass CloseContextMenu extends ClickableComponent {\n  buildCSSClass() {\n    return 'vjs-close-menu-layer vjs-close-context-menu';\n  }\n\n  handleClick() {\n    this.options_.menu.hide();\n  }\n}\n\nvideojs.registerComponent('CloseContextMenu', CloseContextMenu);\n\nexport default CloseContextMenu;\n","import videojs from 'video.js';\n\nimport './ContextMenu.scss';\nimport './Item/ContextMenuToggleLoop.js';\nimport './Item/AboutThisPlayer.js';\n\nimport CloseContextMenu from './CloseContextMenu';\n\nconst Menu = videojs.getComponent('Menu');\n\nclass ContextMenu extends Menu {\n  constructor(player, options) {\n    super(player, options);\n\n    this.addClass('vjs-context-menu');\n\n    this.hide();\n\n    this.player_.on('contextmenu', this.onContextmenu.bind(this));\n  }\n\n  createEl(...args) {\n    const el = super.createEl(...args);\n\n    const layer = new CloseContextMenu(this.player_, {\n      menu: this\n    });\n\n    el.insertBefore(layer.el_, el.firstElementChild);\n\n    return el;\n  }\n\n  show(x, y) {\n    super.show();\n\n    this.el_.append.style.width = '';\n    this.el_.append.style.height = '';\n    this.el_.style.width = '';\n    this.el_.style.height = '';\n\n    const rect = this.player_.el().getBoundingClientRect();\n    const { width, height } = this.el_.getBoundingClientRect();\n\n    const posX = rect.width - width;\n    const posY = rect.height - height;\n\n    let calcX = 0;\n    let calcY = 0;\n\n    if (x > posX) {\n      calcX = (x - posX) * -1;\n    }\n\n    if (y > posY) {\n      calcY = (y - posY) * -1;\n    }\n\n    const marginTop = calcY;\n    const marginLeft = calcX;\n\n    this.el_.style.top = y + 'px';\n    this.el_.style.left = x + 'px';\n    this.el_.style.marginTop = marginTop + 'px';\n    this.el_.style.marginLeft = marginLeft + 'px';\n\n    this.el_.append.style.width = width + 'px';\n    this.el_.append.style.height = height + 'px';\n    this.el_.style.width = width + 'px';\n    this.el_.style.height = height + 'px';\n  }\n\n  onContextmenu(event) {\n    event.preventDefault();\n\n    const rect = this.player_.el().getBoundingClientRect();\n    const { clientX, clientY } = event;\n\n    if (\n      clientY > rect.y &&\n      clientY - rect.height < rect.y &&\n      clientX > rect.x &&\n      clientX - rect.width < rect.x\n    ) {\n      const x = clientX - rect.x;\n      const y = clientY - rect.y;\n\n      this.show(x, y);\n    } else {\n      this.hide();\n    }\n  }\n\n  handleClick(evt) {\n    if (evt.button || evt.button === 0) {\n      if (evt.button !== 2) {\n        this.hide();\n      }\n    }\n  }\n}\n\nContextMenu.prototype.options_ = {\n  children: ['ContextMenuToggleLoop', 'AboutThisPlayer']\n};\n\nvideojs.registerComponent('ContextMenu', ContextMenu);\n\nvideojs.getComponent('Player').prototype.options_.children.push('ContextMenu');\n","import videojs from 'video.js';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass CloseSettingMenu extends ClickableComponent {\n  buildCSSClass() {\n    return 'vjs-close-menu-layer vjs-close-setting-menu';\n  }\n\n  handleClick() {\n    this.options_.menu.menuButton_.hideMenu();\n  }\n}\n\nvideojs.registerComponent('CloseSettingMenu', CloseSettingMenu);\n\nexport default CloseSettingMenu;\n","import videojs from 'video.js';\n\nimport CloseSettingMenu from './CloseSettingMenu';\n\nconst Menu = videojs.getComponent('Menu');\n\nclass SettingMenu extends Menu {\n  constructor(player, options) {\n    super(player, {\n      ...options,\n      name: 'SettingMenu'\n    });\n\n    this.addClass('vjs-setting-menu');\n  }\n\n  init() {\n    if (!this.contentEl_) {\n      return;\n    }\n\n    this.mainMenuItems = this.children().slice(0);\n\n    this.transform(this.mainMenuItems);\n\n    /**\n     *  Since the width of setting menu depends on screen width.\n     *  If player is initialized on small screen size then resize to a bigger screen,\n     *  the width of setting menu will be too wide as the origin width is affected by css,\n     *  A class `vjs-setting-menu-ready` as a condition for css on small screen,\n     *  therefore the origin width will not be affected.\n     */\n    this.addClass('vjs-setting-menu-ready');\n  }\n\n  createEl() {\n    const el = super.createEl();\n    const layer = new CloseSettingMenu(this.player_, {\n      menu: this\n    });\n\n    el.insertBefore(layer.el_, el.firstElementChild);\n\n    return el;\n  }\n\n  update(children = []) {\n    const children_ = this.children().slice(0);\n\n    children_.forEach(child => {\n      this.removeChild(child);\n    });\n\n    children.forEach(child => {\n      this.addChild(child);\n    });\n  }\n\n  resize({ width, height }) {\n    this.contentEl_.style.width = width + 'px';\n    this.contentEl_.style.height = height + 'px';\n  }\n\n  getMenuDimension(items) {\n    const player = this.player_;\n    const tempMenu = new SettingMenuTemp(player);\n\n    tempMenu.update(items);\n    player.addChild(tempMenu);\n\n    const rect = tempMenu.contentEl_.getBoundingClientRect();\n\n    // remove subMenuItem form tempMenu first, otherwise they will also be disposed\n    tempMenu.update();\n    tempMenu.dispose();\n\n    // remove tempMenu in `player.children`\n    player.removeChild(tempMenu);\n\n    return rect;\n  }\n\n  transform(items) {\n    const dimensions = this.getMenuDimension(items);\n    this.update(items);\n    this.resize(dimensions);\n  }\n\n  restore() {\n    this.transform(this.mainMenuItems);\n  }\n\n  removeStyle() {\n    this.contentEl_.removeAttribute('style');\n  }\n\n  hide() {\n    // Disable default hide function\n    // As the default hide function violate the calculation of menu dimension\n  }\n}\n\nclass SettingMenuTemp extends SettingMenu {\n  constructor(player) {\n    super(player, {\n      name: 'SettingMenuTemp'\n    });\n\n    this.addClass('vjs-setting-menu-temp');\n  }\n}\n\nvideojs.registerComponent('SettingMenu', SettingMenu);\n\nexport default SettingMenu;\n","import videojs from 'video.js';\n\nconst MenuItem = videojs.getComponent('MenuItem');\n\nclass SettingMenuItem extends MenuItem {\n  constructor(player, options) {\n    super(\n      player,\n      videojs.mergeOptions(\n        {\n          selectable: false\n        },\n        options\n      )\n    );\n\n    this.menu = options.menu;\n  }\n}\n\nvideojs.registerComponent('SettingMenuItem', SettingMenuItem);\n\nexport default SettingMenuItem;\n","import videojs from 'video.js';\nimport SettingMenuItem from './SettingMenuItem.js';\n\nclass SettingOnOffItem extends SettingMenuItem {\n  createEl() {\n    const options = this.options_;\n    const el = videojs.dom.createEl('li', {\n      className: 'vjs-menu-item vjs-setting-onoff-item',\n      innerHTML: `\n        <div class=\"vjs-icon-placeholder ${this.options_.icon || ''}\"></div>\n        <div>${this.localize(options.label)}</div>\n        <div class=\"vjs-spacer\"></div>\n        <div>\n          <div class=\"vjs-onoff-button\"></div>\n        </div>\n      `\n    });\n\n    return el;\n  }\n\n  update(active) {\n    this.active = typeof active === 'undefined' ? !this.active : active;\n\n    if (this.active) {\n      this.addClass('vjs-active');\n    } else {\n      this.removeClass('vjs-active');\n    }\n  }\n\n  handleClick() {\n    this.update();\n  }\n\n  selected() {}\n}\n\nvideojs.registerComponent('SettingOnOffItem', SettingOnOffItem);\n\nexport default SettingOnOffItem;\n","import videojs from 'video.js';\n\nimport SettingMenuItem from './SettingMenuItem.js';\n\nclass SettingSubOptionTitle extends SettingMenuItem {\n  constructor(player, options) {\n    super(player, options);\n\n    this.addChild('Component', {}, 0);\n    this.addClass('vjs-settings-sub-menu-item');\n    this.addClass('vjs-settings-sub-menu-title');\n  }\n\n  handleClick() {\n    this.options_.menu.restore();\n  }\n}\n\nvideojs.registerComponent('SettingSubOptionTitle', SettingSubOptionTitle);\n\nexport default SettingSubOptionTitle;\n","import videojs from 'video.js';\n\nimport SettingMenuItem from './SettingMenuItem.js';\n\nclass SettingSubOptionItem extends SettingMenuItem {\n  constructor(player, options) {\n    super(player, options);\n\n    this.selectable = true;\n\n    // FIXME: should be remove\n    Object.assign(this, options);\n\n    this.addChild('Component', {}, 0);\n    this.addClass('vjs-settings-sub-menu-item');\n    this.addClass('vjs-settings-sub-menu-option');\n\n    this.update();\n  }\n\n  update() {\n    this.selected(this.value === this.parent.selected.value);\n  }\n\n  handleClick() {\n    this.parent.onChange({ index: this.options_.index });\n    this.menu.restore();\n  }\n}\n\nvideojs.registerComponent('SettingSubOptionItem', SettingSubOptionItem);\n\nexport default SettingSubOptionItem;\n","import videojs from 'video.js';\n\nimport SettingMenuItem from './SettingMenuItem.js';\nimport SettingSubOptionTitle from './SettingSubOptionTitle.js';\nimport SettingSubOptionItem from './SettingSubOptionItem.js';\n\n/**\n * @param {Array<Object|number|string>} entries\n */\nfunction parseEntries(entries, selectedIndex) {\n  entries = entries.map((data, index) => {\n    if (data !== null && typeof data !== 'object') {\n      data = {\n        value: data,\n        label: data\n      };\n    }\n\n    let isDefault = false;\n    if (typeof selectedIndex === 'undefined' && data.default === true) {\n      isDefault = true;\n      selectedIndex = index;\n    }\n\n    return {\n      ...data,\n      index,\n      default: isDefault\n    };\n  });\n\n  return {\n    entries,\n    selected: entries[selectedIndex || 0]\n  };\n}\n\nclass SettingOptionItem extends SettingMenuItem {\n  constructor(player, options = {}) {\n    super(player, options);\n\n    this.setEntries(this.options_.entries);\n\n    if (!this.entries.length) {\n      this.hide();\n    }\n  }\n\n  createEl() {\n    const { icon, label } = this.options_;\n    const el = videojs.dom.createEl('li', {\n      className: 'vjs-menu-item vjs-setting-menu-item',\n      innerHTML: `\n        <div class=\"vjs-icon-placeholder ${icon || ''}\"></div>\n        <div class=\"vjs-setting-menu-label\">${this.localize(label)}</div>\n        <div class=\"vjs-spacer\"></div>\n      `\n    });\n\n    this.selectedValueEl = videojs.dom.createEl('div', {\n      className: 'vjs-setting-menu-value'\n    });\n\n    el.appendChild(this.selectedValueEl);\n\n    return el;\n  }\n\n  setEntries(entries_ = [], selectedIndex) {\n    Object.assign(this, parseEntries(entries_, selectedIndex));\n\n    this.updateSelectedValue();\n\n    const SubOptionItem =\n      videojs.getComponent(`${this.name_}Child`) || SettingSubOptionItem;\n\n    this.subMenuItems = [\n      new SettingSubOptionTitle(this.player_, {\n        label: this.options_.label,\n        menu: this.menu\n      }),\n      ...this.entries.map(({ label, value }, index) => {\n        return new SubOptionItem(this.player_, {\n          index,\n          label,\n          value,\n          parent: this,\n          menu: this.menu\n        });\n      })\n    ];\n  }\n\n  handleClick() {\n    this.menu.transform(this.subMenuItems);\n  }\n\n  select(index) {\n    this.selected = this.entries[index];\n    this.updateSelectedValue();\n  }\n\n  update() {\n    this.subMenuItems.forEach(item => {\n      item.update && item.update();\n    });\n  }\n\n  onChange({ index }) {\n    this.select(index);\n    this.update(index);\n  }\n\n  updateSelectedValue() {\n    if (this.selected) {\n      this.selectedValueEl.innerHTML = this.localize(this.selected.label);\n    }\n  }\n}\n\nvideojs.registerComponent('SettingOptionItem', SettingOptionItem);\n\nexport default SettingOptionItem;\n","import videojs from 'video.js';\n\nlet logType = '';\n\ntry {\n  logType = localStorage && localStorage.getItem('vjs-plus-log');\n} catch (e) {}\n\nconst log = (function () {\n  if (logType === 'normal' || videojs.browser.IE_VERSION) {\n    // log without style\n    return console.info.bind(console, '[VJS Plus]:');\n  } else if (logType) {\n    // log with style\n    return console.info.bind(\n      console,\n      '%c[VJS Plus]:',\n      'font-weight: bold; color:#2196F3;'\n    );\n  }\n\n  return function () {};\n})();\n\nexport default log;\n","import videojs from 'video.js';\nimport SettingOptionItem from '../Item/SettingOptionItem.js';\nimport log from '../../../Utils/Log';\n\nclass PlaybackRateSettingItem extends SettingOptionItem {\n  constructor(player, options) {\n    super(player, {\n      ...options,\n      label: 'Speed',\n      icon: 'vjs-icon-slow-motion-video',\n      entries: [\n        0.25,\n        0.5,\n        0.75,\n        {\n          label: 'Normal',\n          value: 1,\n          default: true\n        },\n        1.25,\n        1.5,\n        1.75,\n        2\n      ]\n    });\n\n    this.addClass('vjs-setting-playback-rate');\n\n    // Since playback rate will be reset to noraml when video source changed\n    // So we need to listen on `ratechange`\n    player.on('ratechange', () => {\n      const rate = player.playbackRate();\n      const index = this.entries.findIndex(({ value }) => rate === value);\n\n      if (index > -1) {\n        this.select(index);\n        this.update(index);\n      } else {\n        log.warn('Incorrect playbackRate value, setting menu will not updated');\n      }\n    });\n  }\n\n  onChange(...args) {\n    super.onChange(...args);\n    this.player_.playbackRate(this.selected.value);\n  }\n}\n\nvideojs.registerComponent('PlaybackRateSettingItem', PlaybackRateSettingItem);\n\nexport default PlaybackRateSettingItem;\n","import videojs from 'video.js';\nimport SettingMenu from './SettingMenu.js';\n\nimport './Item/SettingOnOffItem';\nimport './Item/SettingOptionItem.js';\nimport './PlaybackRate/PlaybackRateSettingItem.js';\nimport './Setting.scss';\n\nconst MenuButton = videojs.getComponent('MenuButton');\n\nclass SettingMenuButton extends MenuButton {\n  constructor(player, options) {\n    super(player, options);\n\n    // move menu to player\n    player.addChild(this.menu);\n    player.SettingMenu = this.menu;\n\n    // remove videojs parent child relationship between button and menu\n    this.removeChild(this.menu);\n  }\n\n  buildCSSClass() {\n    return `vjs-setting-button ${super.buildCSSClass()}`;\n  }\n\n  buildWrapperCSSClass() {\n    return `vjs-setting-button ${super.buildWrapperCSSClass()}`;\n  }\n\n  createMenu() {\n    const menu = new SettingMenu(this.player_, {\n      menuButton: this\n    });\n    const entries = this.options_.entries || [];\n\n    entries.forEach(componentName => {\n      const component = menu.addChild(componentName, {\n        menu\n      });\n      menu[componentName] = component;\n    });\n\n    return menu;\n  }\n\n  hideMenu() {\n    this.unpressButton();\n    this.el_.blur();\n  }\n\n  pressButton() {\n    super.pressButton();\n\n    this.menu.init();\n  }\n\n  unpressButton() {\n    super.unpressButton();\n\n    this.player_.removeClass('vjs-keep-control-showing');\n\n    this.menu.restore();\n  }\n\n  handleClick() {\n    this.player_.addClass('vjs-keep-control-showing');\n\n    if (this.buttonPressed_) {\n      this.unpressButton();\n    } else {\n      this.pressButton();\n    }\n\n    this.off(document.body, 'click', this.hideMenu);\n    // this.off(document.body, 'touchend', this.hideMenu);\n\n    setTimeout(() => {\n      this.one(document.body, 'click', this.hideMenu);\n      // _this.buttonPressed_ && _this.one(document.body, 'touchend', _this.hideMenu);\n    }, 0);\n  }\n}\n\nSettingMenuButton.prototype.controlText_ = 'Settings';\nSettingMenuButton.prototype.options_ = {\n  entries: ['PlaybackRateSettingItem']\n};\n\nvideojs.registerComponent('SettingMenuButton', SettingMenuButton);\n\nexport default SettingMenuButton;\n"],"names":["findChild","parent","name","result","children","childIndex_","Object","keys","length","componentId","component","name_","push","index","children_","indexOf","videojs","getComponent","prototype","getDuration","player","options","value","duration","Infinity","liveTracker","liveCurrentTime","getPlugin","registerPlugin","browser","IS_IPHONE","IOS_VERSION","hook","vjsPlayer","playsinline","options_","addClass","Component","ControlBar","ControlSeparator","className","registerComponent","_","slice","splice","enableMobileView","mobileView","matchDimension","window","matchMedia","matches","innerWidth","controlBar","hide","one","events","callback","off","show","userActive","Dom","dom","TimeTooltip","update","seekBarRect","seekBarPoint","content","tooltipRect","getBoundingClientRect","el_","playerRect","player_","el","seekBarPointPx","width","spaceRightOfPoint","spaceLeftOfPoint","pullTooltipBy","centerPosition","centerOffsetOfPoint","Math","round","style","right","write","ProgressBarPadding","createEl","SeekBar","getPercent","time","currentTime","percent","handleMouseMove","event","isSingleLeftClick","newTime","calculateDistance","on","ready","controls","Title","title_","playerOptions","title","contentEl_","appendChild","cache_","innerHTML","videoTitle","getChild","PlayToggleButton","ClickableComponent","PlayToggleLayer","handleClick","evt","paused","call","playerChildren","loadSpinnerIndex","MenuItem","ContextMenuItem","selectable","controlText","label","args","insertAdjacentHTML","icon","ContextMenu","ContextMenuToggleLoop","bind","selected","loop","AboutThisPlayer","open","CloseContextMenu","buildCSSClass","menu","Menu","onContextmenu","layer","insertBefore","firstElementChild","x","y","append","height","rect","posX","posY","calcX","calcY","marginTop","marginLeft","top","left","preventDefault","clientX","clientY","button","CloseSettingMenu","menuButton_","hideMenu","SettingMenu","init","mainMenuItems","transform","forEach","child","removeChild","addChild","resize","getMenuDimension","items","tempMenu","SettingMenuTemp","dispose","dimensions","restore","removeStyle","removeAttribute","SettingMenuItem","mergeOptions","SettingOnOffItem","localize","active","removeClass","SettingSubOptionTitle","SettingSubOptionItem","assign","onChange","parseEntries","entries","selectedIndex","map","data","isDefault","SettingOptionItem","setEntries","selectedValueEl","entries_","updateSelectedValue","SubOptionItem","subMenuItems","select","item","logType","localStorage","getItem","e","log","IE_VERSION","console","info","PlaybackRateSettingItem","rate","playbackRate","findIndex","warn","MenuButton","SettingMenuButton","buildWrapperCSSClass","createMenu","menuButton","componentName","unpressButton","blur","pressButton","buttonPressed_","document","body","setTimeout","controlText_"],"mappings":"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"}