{"version":3,"file":"index.js","sources":["../../../source/Utils/Log.js","../../../source/Plugin/ElectronFullscreenToggle/ElectronFullscreenToggle.js"],"sourcesContent":["import videojs from 'video.js';\n\nlet logType = '';\n\ntry {\n  logType = localStorage && localStorage.getItem('vjs-plus-log');\n} catch (e) {}\n\nconst log = (function () {\n  if (logType === 'normal' || videojs.browser.IE_VERSION) {\n    // log without style\n    return console.info.bind(console, '[VJS Plus]:');\n  } else if (logType) {\n    // log with style\n    return console.info.bind(\n      console,\n      '%c[VJS Plus]:',\n      'font-weight: bold; color:#2196F3;'\n    );\n  }\n\n  return function () {};\n})();\n\nexport default log;\n","import videojs from 'video.js';\nimport log from '../../Utils/Log';\n\nlet getCurrentWindow;\ntry {\n  getCurrentWindow = require('electron').remote.getCurrentWindow();\n} catch (error) {\n  getCurrentWindow = window.getCurrentWindow;\n}\n\nclass ElectronFullscreenToggle extends videojs.getComponent(\n  'FullscreenToggle'\n) {\n  constructor(player, options) {\n    super(player, options);\n\n    const currentWindow = window.getCurrentWindow();\n    const setFullscreen = flag => {\n      currentWindow.setFullScreen(flag);\n      return player;\n    };\n\n    const triggerFullscreenChange = () => {\n      player.trigger('fullscreenchange');\n    };\n\n    player.requestFullscreen = setFullscreen.bind(player, true);\n    player.exitFullscreen = setFullscreen.bind(player, false);\n    player.isFullscreen = () => currentWindow.isFullScreen();\n\n    currentWindow.addListener('enter-full-screen', triggerFullscreenChange);\n    currentWindow.addListener('leave-full-screen', triggerFullscreenChange);\n\n    player.on('dispose', () => {\n      currentWindow.removeListener(\n        'enter-full-screen',\n        triggerFullscreenChange\n      );\n      currentWindow.removeListener(\n        'leave-full-screen',\n        triggerFullscreenChange\n      );\n    });\n\n    if (player.isFullscreen()) {\n      // @ts-ignore\n      this.handleFullscreenChange();\n      player.addClass('vjs-fullscreen');\n    }\n  }\n\n  handleClick() {\n    if (this.player_.isFullscreen()) {\n      this.player_.exitFullscreen();\n    } else {\n      this.player_.requestFullscreen();\n    }\n  }\n}\n\nif (getCurrentWindow) {\n  videojs.registerComponent(\n    'ElectronFullscreenToggle',\n    ElectronFullscreenToggle\n  );\n\n  const controlBarChildren = videojs.getComponent('ControlBar').prototype\n    .options_.children;\n\n  const fullScreenButtonIndex = controlBarChildren.indexOf('fullscreenToggle');\n\n  controlBarChildren[fullScreenButtonIndex] = 'ElectronFullscreenToggle';\n} else {\n  log(\n    'Plugin \"ElectronFullscreenToggle\" is not enabled, please check the docs for more information'\n  );\n}\n"],"names":["logType","localStorage","getItem","e","log","videojs","browser","IE_VERSION","console","info","bind","getCurrentWindow","require","remote","error","window","ElectronFullscreenToggle","player","options","currentWindow","setFullscreen","flag","setFullScreen","triggerFullscreenChange","trigger","requestFullscreen","exitFullscreen","isFullscreen","isFullScreen","addListener","on","removeListener","handleFullscreenChange","addClass","handleClick","player_","getComponent","registerComponent","controlBarChildren","prototype","options_","children","fullScreenButtonIndex","indexOf"],"mappings":"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"}