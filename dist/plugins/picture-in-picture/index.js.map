{"version":3,"file":"index.js","sources":["../../../source/Plugin/PictureInPicture/ExitPipButton.js","../../../source/Plugin/PictureInPicture/PipPlayerWrapper.js","../../../source/Plugin/PictureInPicture/PipButton.js","../../../source/Plugin/PictureInPicture/PictureInPicture.js"],"sourcesContent":["import videojs from 'video.js';\n\nconst ClickableComponent = videojs.getComponent('ClickableComponent');\n\nclass ExitPipButton extends ClickableComponent {\n  constructor(player, options) {\n    super(player, {\n      name: 'ExitPipButton',\n      ...options\n    });\n\n    this.addClass('vjs-exit-pip-button');\n\n    this.el_.querySelector('.vjs-icon-placeholder').innerHTML = '&#10005;';\n  }\n\n  handleClick() {\n    this.options_.parentPlayer.pictureInPicture().exit();\n  }\n}\n\nExitPipButton.prototype.controlText_ = 'Exit Pictutre In Pictutre';\n\nvideojs.registerComponent('ExitPipButton', ExitPipButton);\n\nexport default ExitPipButton;\n","import videojs from 'video.js';\nimport ExitPipButton from './ExitPipButton';\n\nconst Component = videojs.getComponent('Component');\n\nclass PipPlayerWrapper extends Component {\n  constructor(player, options) {\n    super(player, options);\n\n    player.addChild(\n      new ExitPipButton(player, {\n        parentPlayer: options.parentPlayer\n      })\n    );\n\n    this.addChild(player);\n\n    if (!options.wrapper) {\n      this.addClass('vjs-pip-player-wrapper');\n      document.body.appendChild(this.el_);\n    }\n  }\n\n  createEl() {\n    if (this.options_.wrapper) {\n      return this.options_.wrapper;\n    }\n\n    return super.createEl();\n  }\n}\n\nvideojs.registerComponent('PipPlayerWrapper', PipPlayerWrapper);\n\nexport default PipPlayerWrapper;\n","import videojs from 'video.js';\n\nconst Button = videojs.getComponent('Button');\n\nclass PipButton extends Button {\n  constructor(player, options) {\n    super(player, options);\n\n    this.el_.querySelector('.vjs-icon-placeholder').className +=\n      ' vjs-icon-picture-in-picture';\n  }\n\n  buildCSSClass() {\n    return `vjs-pip-button ${super.buildCSSClass()}`;\n  }\n\n  handleClick(...args) {\n    super.handleClick(...args);\n\n    this.player_.pictureInPicture().toggle();\n  }\n}\n\nPipButton.prototype.controlText_ = 'Picture in Picture';\n\nvideojs.registerComponent('PipButton', PipButton);\n\nvideojs.hook('setup', vjsPlayer => {\n  const { parent, index } = vjsPlayer.findChild('SettingMenuButton')[0];\n\n  parent.addChild(new PipButton(vjsPlayer), {}, index);\n});\n","import videojs from 'video.js';\n\nimport PipPlayerWrapper from './PipPlayerWrapper';\nimport './PictureInPicture.scss';\nimport './PipButton';\n\nclass pictureInPicture extends videojs.getPlugin('plugin') {\n  constructor(player, options = {}) {\n    super(player, options);\n\n    this.cache_ = {};\n    this.pipPlayer = null;\n    this.options_ = options;\n    this.parentPlayer = player;\n  }\n\n  toggle() {\n    if (this.pipPlayer) {\n      this.exit();\n    } else {\n      this.init();\n    }\n  }\n\n  init() {\n    if (!this.pipPlayer) {\n      this.handleOriginPlayer();\n      this.createPipPlayer();\n    }\n  }\n\n  createPipPlayer() {\n    const { parentPlayer, options_ } = this;\n    const id = parentPlayer.id_ + '-pip-player';\n    const videoEl = videojs.dom.createEl('video', {\n      id,\n      className: 'vjs-pip-player'\n    });\n\n    document.body.appendChild(videoEl);\n\n    const pipPlayerOptions = {\n      ...parentPlayer.options_,\n      ...parentPlayer.cache_,\n      autoplay: true,\n      muted: parentPlayer.muted()\n    };\n\n    const pipPlayer = (this.pipPlayer = videojs(videoEl, pipPlayerOptions));\n\n    this.wrapper = new PipPlayerWrapper(pipPlayer, {\n      ...options_,\n      parentPlayer\n    });\n\n    this.dragzone = pipPlayer.getChild('PlayToggleLayer');\n\n    this.updatePosition({\n      ...this.cache_,\n      ...options_\n    });\n\n    pipPlayer.ready(() => {\n      pipPlayer.currentTime(parentPlayer.currentTime());\n      pipPlayer.play();\n    });\n\n    if (options_.draggable !== false) {\n      this.draggable(this.dragzone.el_);\n    }\n  }\n\n  handleOriginPlayer() {\n    const { parentPlayer } = this;\n\n    parentPlayer.pause();\n    parentPlayer.hasStarted(false);\n    parentPlayer.controls(false);\n    parentPlayer.addClass('vjs-pip-player-enabled');\n\n    parentPlayer.one('play', () => {\n      this.exit();\n    });\n  }\n\n  exit() {\n    const { parentPlayer, pipPlayer, wrapper } = this;\n\n    if (parentPlayer) {\n      parentPlayer.controls(true);\n      parentPlayer.removeClass('vjs-pip-player-enabled');\n      parentPlayer.paused() && parentPlayer.play();\n\n      if (pipPlayer) {\n        if (!pipPlayer.ended()) {\n          parentPlayer.currentTime(pipPlayer.currentTime());\n        }\n      }\n    }\n\n    if (pipPlayer) {\n      pipPlayer.dispose();\n      wrapper.dispose();\n    }\n\n    this.pipPlayer = null;\n  }\n\n  dispose() {\n    this.parentPlayer = null;\n  }\n\n  updatePosition({ x, y }) {\n    if (typeof x !== 'undefined' && typeof y !== 'undefined') {\n      this.wrapper.el_.style.bottom = y + 'px';\n      this.wrapper.el_.style.left = x + 'px';\n    }\n  }\n\n  draggable(el) {\n    let x, y;\n    const _this = this;\n\n    const move = evt => {\n      evt.preventDefault();\n\n      this.cache_.x = Math.max(\n        0,\n        Math.min(window.innerWidth - el.offsetWidth, evt.clientX - x)\n      );\n      this.cache_.y = Math.max(\n        0,\n        Math.min(\n          window.innerHeight - el.offsetHeight,\n          window.innerHeight - evt.clientY - el.offsetHeight + y\n        )\n      );\n\n      this.updatePosition(this.cache_);\n    };\n\n    el.addEventListener('mousedown', evt => {\n      evt.preventDefault();\n\n      x = evt.offsetX;\n      y = evt.offsetY;\n\n      const disableClick = () => {\n        window.removeEventListener('mousemove', disableClick);\n        _this.dragzone.disable();\n      };\n\n      window.addEventListener('mousemove', move);\n      window.addEventListener('mousemove', disableClick);\n\n      window.addEventListener('mouseup', function mouseup(evt) {\n        window.removeEventListener('mouseup', mouseup);\n        window.removeEventListener('mousemove', move);\n        window.removeEventListener('mousemove', disableClick);\n\n        setTimeout(() => {\n          _this.dragzone.enable();\n        }, 0);\n      });\n    });\n\n    const onResize = () => {\n      const { x, y } = this.cache_;\n\n      this.updatePosition({\n        x: Math.min(x, window.innerWidth - el.offsetWidth),\n        y: Math.min(y, window.innerHeight - el.offsetHeight)\n      });\n    };\n\n    window.addEventListener('resize', onResize);\n\n    this.pipPlayer.on('dispose', () => {\n      window.removeEventListener('resize', onResize);\n    });\n  }\n}\n\nvideojs.registerPlugin('pictureInPicture', pictureInPicture);\n"],"names":["ClickableComponent","videojs","getComponent","ExitPipButton","player","options","name","addClass","el_","querySelector","innerHTML","handleClick","options_","parentPlayer","pictureInPicture","exit","prototype","controlText_","registerComponent","Component","PipPlayerWrapper","addChild","wrapper","document","body","appendChild","createEl","Button","PipButton","className","buildCSSClass","args","player_","toggle","hook","vjsPlayer","findChild","parent","index","cache_","pipPlayer","init","handleOriginPlayer","createPipPlayer","id","id_","videoEl","dom","pipPlayerOptions","autoplay","muted","dragzone","getChild","updatePosition","ready","currentTime","play","draggable","pause","hasStarted","controls","one","removeClass","paused","ended","dispose","x","y","style","bottom","left","el","_this","move","evt","preventDefault","Math","max","min","window","innerWidth","offsetWidth","clientX","innerHeight","offsetHeight","clientY","addEventListener","offsetX","offsetY","disableClick","removeEventListener","disable","mouseup","setTimeout","enable","onResize","on","getPlugin","registerPlugin"],"mappings":"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"}